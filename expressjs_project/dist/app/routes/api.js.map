{"version":3,"sources":["../../../app/routes/api.js"],"names":["express","require","router","Router","bodyParser","fs","feedbackData","get","req","res","json","use","urlencoded","extended","post","unshift","body","writeFile","JSON","stringify","err","console","log","delete","splice","params","id","module","exports"],"mappings":";;AAAA;;;AAGA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,aAAaH,QAAQ,aAAR,CAAnB;AACA,IAAMI,KAAKJ,QAAQ,IAAR,CAAX;AACA,IAAMK,eAAeL,QAAQ,uBAAR,CAArB;;AAGAC,OAAOK,GAAP,CAAW,MAAX,EAAkB,UAAUC,GAAV,EAAcC,GAAd,EAAmB;AACjCA,QAAIC,IAAJ,CAASJ,YAAT;AACH,CAFD;AAGAJ,OAAOS,GAAP,CAAWP,WAAWM,IAAX,EAAX;AACAR,OAAOS,GAAP,CAAWP,WAAWQ,UAAX,CAAsB,EAACC,UAAS,KAAV,EAAtB,CAAX;;AAEAX,OAAOY,IAAP,CAAY,MAAZ,EAAmB,UAAUN,GAAV,EAAcC,GAAd,EAAmB;AACnCH,iBAAaS,OAAb,CAAqBP,IAAIQ,IAAzB;AACCX,OAAGY,SAAH,CAAa,wBAAb,EAAsCC,KAAKC,SAAL,CAAeb,YAAf,CAAtC,EAAmE,MAAnE,EACA,UAAUc,GAAV,EAAe;AACX,YAAGA,GAAH,EAAQ;AACJC,oBAAQC,GAAR,CAAYF,GAAZ;AACH;AACJ,KALD;AAMDX,QAAIC,IAAJ,CAASJ,YAAT;AACF,CATD;;AAWAJ,OAAOqB,MAAP,CAAc,UAAd,EAAyB,UAAUf,GAAV,EAAcC,GAAd,EAAmB;AACxCH,iBAAakB,MAAb,CAAoBhB,IAAIiB,MAAJ,CAAWC,EAA/B,EAAkC,CAAlC;AACArB,OAAGY,SAAH,CAAa,wBAAb,EAAsCC,KAAKC,SAAL,CAAeb,YAAf,CAAtC,EAAmE,MAAnE,EACI,UAAUc,GAAV,EAAe;AACX,YAAGA,GAAH,EAAQ;AACJC,oBAAQC,GAAR,CAAYF,GAAZ;AACH;AACJ,KALL;AAMAX,QAAIC,IAAJ,CAASJ,YAAT;AACH,CATD;;AAWAqB,OAAOC,OAAP,GAAiB1B,MAAjB","file":"api.js","sourcesContent":["/**\n * Created by hoanganh on 07/08/2017.\n */\nconst express = require('express')\nconst router = express.Router();\nconst bodyParser = require('body-parser');\nconst fs = require('fs');\nconst feedbackData = require('../data/feedback.json');\n\n\nrouter.get('/api',function (req,res) {\n    res.json(feedbackData);\n});\nrouter.use(bodyParser.json());\nrouter.use(bodyParser.urlencoded({extended:false}));\n\nrouter.post('/api',function (req,res) {\n   feedbackData.unshift(req.body);\n    fs.writeFile('app/data/feedback.json',JSON.stringify(feedbackData),'utf8',\n    function (err) {\n        if(err) {\n            console.log(err);\n        }\n    });\n   res.json(feedbackData);\n});\n\nrouter.delete('/api/:id',function (req,res) {\n    feedbackData.splice(req.params.id,1);\n    fs.writeFile('app/data/feedback.json',JSON.stringify(feedbackData),'utf8',\n        function (err) {\n            if(err) {\n                console.log(err);\n            }\n        });\n    res.json(feedbackData);\n});\n\nmodule.exports = router;"]}